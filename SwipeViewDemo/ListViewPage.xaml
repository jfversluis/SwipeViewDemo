<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:d="http://xamarin.com/schemas/2014/forms/design" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="SwipeViewDemo.ListViewPage" Title="ListView">
    <ContentPage.Resources>
        <ResourceDictionary>

            <Style x:Key="TitleStyle" TargetType="Label">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="TextColor" Value="Black" />
                <Setter Property="Margin" Value="6, 0, 6, 6" />
            </Style>

            <Style x:Key="DateStyle" TargetType="Label">
                <Setter Property="TextColor" Value="DarkGray" />
                <Setter Property="FontSize" Value="10" />
                <Setter Property="Margin" Value="6, 0, 6, 6" />
            </Style>

            <Style x:Key="SubTitleStyle" TargetType="Label">
                <Setter Property="TextColor" Value="DarkGray" />
                <Setter Property="FontSize" Value="12" />
                <Setter Property="Margin" Value="6, 0" />
            </Style>

            <DataTemplate x:Key="MessageTemplate">
                <ViewCell>
                    <SwipeView HeightRequest="80">
                        <Grid BackgroundColor="White"
                            RowSpacing="0" Padding="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Label
                                Grid.Column="0"
                                Grid.Row="0"
                                Text="{Binding Title}"
                                Style="{StaticResource TitleStyle}"/>
                            <Label
                                Grid.Column="1"
                                Grid.Row="0"
                                Text="{Binding Date}"
                                Style="{StaticResource DateStyle}"/>
                            <Label
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Grid.Row="1"
                                Text="{Binding SubTitle}"
                                Style="{StaticResource SubTitleStyle}"/>
                            <Label
                                Grid.Column="0"
                                Grid.ColumnSpan="2"
                                Grid.Row="2"
                                Text="{Binding Description}"
                                Style="{StaticResource SubTitleStyle}"/>
                        </Grid>
                        <SwipeView.LeftItems>
                            <SwipeItems
                                Mode="Reveal"
                                SwipeBehaviorOnInvoked="Close">
                                <SwipeItem
                                    Text="Favourite"
                                    Icon="calculator.png"
                                    BackgroundColor="Yellow"
                                    Command="{Binding Source={x:Reference SwipeListView}, Path=BindingContext.FavouriteCommand}"/>
                            </SwipeItems>
                        </SwipeView.LeftItems>
                        <SwipeView.RightItems>
                            <SwipeItems
                                Mode="Execute">
                                <SwipeItem
                                    Text="Delete"
                                    Icon="coffee.png"
                                    BackgroundColor="Red"
                                    Command="{Binding Source={x:Reference SwipeListView}, Path=BindingContext.DeleteCommand}"/>
                            </SwipeItems>
                        </SwipeView.RightItems>
                    </SwipeView>
                </ViewCell>
            </DataTemplate>

        </ResourceDictionary>
    </ContentPage.Resources>
    <ContentPage.Content>
        <Grid>
            <ListView
                x:Name="SwipeListView"
                ItemsSource="{Binding Messages}"
                ItemTemplate="{StaticResource MessageTemplate}"
                CachingStrategy="RecycleElement"
                HasUnevenRows="True" />
        </Grid>
    </ContentPage.Content>
</ContentPage>